<?php
/**
 * ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ 3ë°•4ì¼ í¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (ìƒˆ spots êµ¬ì¡° + Klook ì œíœ´ ë§í¬)
 * ì¶œì²˜: https://www.triptalk.me/ko/trip/pTa1RaIUMFEE
 *
 * wp eval-file /var/www/html/wp-content/themes/flavor-trip/update-osaka.php --allow-root
 */

if ( ! defined( 'WP_CLI' ) || ! WP_CLI ) {
    exit( 1 );
}

WP_CLI::log( '=== ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ 3ë°•4ì¼ í¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (spots êµ¬ì¡° + Klook ë§í¬) ===' );

// â”€â”€ Klook AID ì„¤ì • â”€â”€
set_theme_mod( 'ft_klook_aid', '6yjZP2Ac' );
WP_CLI::log( 'Klook AID ì„¤ì • ì™„ë£Œ: 6yjZP2Ac' );

// Klook URL í—¬í¼ (AID ìë™ ë¶€ì°©)
$klook = function ( $path, $label ) {
    $url = 'https://www.klook.com/ko/activity/' . $path;
    return ft_klook_link( $url, $label );
};

// â”€â”€ ê¸°ì¡´ ì˜¤ì‚¬ì¹´ í¬ìŠ¤íŠ¸ ì°¾ê¸° â”€â”€
$existing = get_posts( [
    'post_type'   => 'travel_itinerary',
    'meta_key'    => '_ft_destination_name',
    'meta_value'  => 'ì˜¤ì‚¬ì¹´',
    'numberposts' => 1,
] );

// â”€â”€ Klook ë§í¬ ë³€ìˆ˜ â”€â”€
$k_rapit     = $klook( '599-kansai-airport-namba-train-ticket-osaka/', 'ë¼í”¼íŠ¸ í‹°ì¼“ ì˜ˆì•½' );
$k_icoca     = $klook( '1754-icoca-ic-card-osaka/', 'ICOCA ì˜ˆì•½' );
$k_kaiyukan  = $klook( '598-osaka-aquarium-kaiyukan-japan/', 'ì…ì¥ê¶Œ ì˜ˆì•½' );
$k_ferris    = $klook( '191266-tempozan-giant-ferris-wheel/', 'ëŒ€ê´€ëŒì°¨ ì˜ˆì•½' );
$k_santa     = $klook( '72049-osaka-bay-cruise-santa-maria/', 'ìœ ëŒì„  ì˜ˆì•½' );
$k_combo     = $klook( '20241-aquarium-ticket-nankai-airport-express-osaka/', 'ê°€ì´ìœ ì¹¸+ë¼í”¼íŠ¸ ì½¤ë³´' );
$k_usj       = $klook( '46604-universal-studios-japan-e-ticket-osaka-qr-code-direct-entry/', 'USJ ì…ì¥ê¶Œ ì˜ˆì•½' );
$k_express   = $klook( '3407-universal-studios-japan-express-pass-osaka/', 'ìµìŠ¤í”„ë ˆìŠ¤ íŒ¨ìŠ¤ ì˜ˆì•½' );
$k_castle    = $klook( '30110-osaka-castle-ticket/', 'ì…ì¥ê¶Œ ì˜ˆì•½' );
$k_pass      = $klook( '82312-amazing-pass-osaka/', 'ì£¼ìœ íŒ¨ìŠ¤ ì˜ˆì•½' );

// â”€â”€ ë³¸ë¬¸ (Klook ë§í¬ í¬í•¨) â”€â”€
$link_rapit   = $klook( '599-kansai-airport-namba-train-ticket-osaka/', 'ë‚œì¹´ì´ ë¼í”¼íŠ¸ ì˜ˆì•½' );
$link_icoca   = $klook( '1754-icoca-ic-card-osaka/', 'ICOCA ì¹´ë“œ ì˜ˆì•½' );
$link_kaiyukan = $klook( '598-osaka-aquarium-kaiyukan-japan/', 'ê°€ì´ìœ ì¹¸ ì…ì¥ê¶Œ ì˜ˆì•½' );
$link_usj     = $klook( '46604-universal-studios-japan-e-ticket-osaka-qr-code-direct-entry/', 'USJ í‹°ì¼“ ì˜ˆì•½' );
$link_express = $klook( '3407-universal-studios-japan-express-pass-osaka/', 'ìµìŠ¤í”„ë ˆìŠ¤ íŒ¨ìŠ¤ ì˜ˆì•½' );
$link_castle  = $klook( '30110-osaka-castle-ticket/', 'ì˜¤ì‚¬ì¹´ì„± ì…ì¥ê¶Œ ì˜ˆì•½' );
$link_pass    = $klook( '82312-amazing-pass-osaka/', 'ì˜¤ì‚¬ì¹´ ì£¼ìœ íŒ¨ìŠ¤ ì˜ˆì•½' );

$content = <<<HTML
<h2>ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ 3ë°• 4ì¼ ì™„ë²½ ê°€ì´ë“œ</h2>

ì˜¤ì‚¬ì¹´ëŠ” ì•„ì´ì™€ í•¨ê»˜í•˜ëŠ” ê°€ì¡±ì—¬í–‰ì— ìµœì í™”ëœ ë„ì‹œì…ë‹ˆë‹¤. ë‚œë°”ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ë„í†¤ë³´ë¦¬ì˜ í™”ë ¤í•œ ë„¤ì˜¨ì‚¬ì¸ê³¼ ê¸¸ê±°ë¦¬ ìŒì‹, ì„¸ê³„ ìµœëŒ€ê¸‰ ê°€ì´ìœ ì¹¸ ìˆ˜ì¡±ê´€, ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œê°€ ìˆëŠ” ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬(USJ)ê¹Œì§€ â€” ì•„ì´ë„ ì–´ë¥¸ë„ ëª¨ë‘ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ì½˜í…ì¸ ê°€ ê°€ë“í•©ë‹ˆë‹¤.

ì´ ì¼ì •ì€ ì´ˆë“±í•™ìƒ ìë…€ë¥¼ ë‘” ê°€ì¡±ì„ ê¸°ì¤€ìœ¼ë¡œ êµ¬ì„±í–ˆìœ¼ë©°, ë‚œë°” ì§€ì—­ í˜¸í…”ì„ ê±°ì ìœ¼ë¡œ ëŒ€ì¤‘êµí†µë§Œìœ¼ë¡œ ëª¨ë“  ì¼ì •ì„ ì†Œí™”í•  ìˆ˜ ìˆë„ë¡ ë™ì„ ì„ ìµœì í™”í–ˆìŠµë‹ˆë‹¤. 1945ë…„ ì°½ì—…í•œ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ ë¯¸ì¦ˆë…¸, ì˜¤ì‚¬ì¹´ì˜ ë¶€ì—Œ êµ¬ë¡œëª¬ ì‹œì¥, 551 í˜¸ë¼ì´ ë¶€íƒ€ë§Œ ë“± ì˜¤ì‚¬ì¹´ì˜ ëŒ€í‘œ ë¨¹ê±°ë¦¬ë„ ë¹ ì§ì—†ì´ ë‹´ì•˜ìŠµë‹ˆë‹¤.

3ì›” ë²šê½ƒ ì‹œì¦Œì— ë°©ë¬¸í•˜ë©´ ì˜¤ì‚¬ì¹´ì„± ê³µì›ì˜ ë²šê½ƒê¸¸ê¹Œì§€ ë”í•´ì ¸ ë”ìš± íŠ¹ë³„í•œ ì—¬í–‰ì´ ë©ë‹ˆë‹¤.

<h3>ì—¬í–‰ í•˜ì´ë¼ì´íŠ¸</h3>
<ul>
<li><strong>ê°€ì´ìœ ì¹¸ ìˆ˜ì¡±ê´€</strong> â€” ê³ ë˜ìƒì–´ê°€ ìœ ì˜í•˜ëŠ” ì„¸ê³„ ìµœëŒ€ê¸‰ ìˆ˜ì¡°, í­ê·„Â·ê°€ì˜¤ë¦¬ í„°ì¹˜ ì²´í—˜ ({$link_kaiyukan})</li>
<li><strong>ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬</strong> â€” ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œ, í•´ë¦¬í¬í„°, ë¯¸ë‹ˆì–¸ íŒŒí¬ ({$link_usj})</li>
<li><strong>ë„í†¤ë³´ë¦¬ & ì‹ ì‚¬ì´ë°”ì‹œ</strong> â€” ê¸€ë¦¬ì½” ê°„íŒ í¬í† ì¡´, íƒ€ì½”ì•¼í‚¤Â·ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ ë¨¹ë°©</li>
<li><strong>ì˜¤ì‚¬ì¹´ì„±</strong> â€” ë„ìš”í† ë¯¸ íˆë°ìš”ì‹œì˜ ì„±, 3ì›” ë²šê½ƒ ëª…ì†Œ ({$link_castle})</li>
<li><strong>êµ¬ë¡œëª¬ ì‹œì¥</strong> â€” 180ë…„ ì „í†µ, ì°¸ì¹˜ ì‚¬ì‹œë¯¸Â·ê³ ë² ê·œ ê¼¬ì¹˜Â·ë”¸ê¸° ëŒ€ë³µ</li>
</ul>

<h3>ğŸ« ì¶”ì²œ ì˜ˆì•½ ìƒí’ˆ</h3>
<ul>
<li>{$link_rapit} â€” ê°„ì‚¬ì´ê³µí•­â†”ë‚œë°” 34ë¶„ íŠ¹ê¸‰ì—´ì°¨</li>
<li>{$link_icoca} â€” ê°„ì‚¬ì´ ì „ì—­ êµí†µ+í¸ì˜ì  ê²°ì œ</li>
<li>{$link_pass} â€” êµí†µ ë¬´ì œí•œ + ì˜¤ì‚¬ì¹´ì„±Â·ëŒ€ê´€ëŒì°¨Â·ìœ ëŒì„  ë¬´ë£Œ ì…ì¥</li>
<li>{$link_usj} â€” QRì½”ë“œë¡œ ë°”ë¡œ ì…ì¥</li>
<li>{$link_express} â€” USJ ëŒ€ê¸°ì‹œê°„ ëŒ€í­ ì ˆê°</li>
</ul>
HTML;

$excerpt = 'ì•„ì´ì™€ í•¨ê»˜ ì¦ê¸°ëŠ” ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ 3ë°•4ì¼ ì½”ìŠ¤. ê°€ì´ìœ ì¹¸ ìˆ˜ì¡±ê´€, ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬(USJ), ë„í†¤ë³´ë¦¬ ë¨¹ë°©, ì˜¤ì‚¬ì¹´ì„±ê¹Œì§€ â€” ë‚œë°” ì¤‘ì‹¬ ë™ì„ ìœ¼ë¡œ êµ¬ì„±í•œ ì™„ë²½ ê°€ì´ë“œì…ë‹ˆë‹¤.';

$post_data = [
    'post_title'   => 'ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ 3ë°• 4ì¼',
    'post_content' => $content,
    'post_excerpt' => $excerpt,
    'post_status'  => 'publish',
    'post_type'    => 'travel_itinerary',
    'post_author'  => 1,
];

if ( ! empty( $existing ) ) {
    $post_id = $existing[0]->ID;
    $post_data['ID'] = $post_id;
    wp_update_post( $post_data );
    WP_CLI::log( "ê¸°ì¡´ í¬ìŠ¤íŠ¸ #{$post_id} ì—…ë°ì´íŠ¸" );
} else {
    $post_id = wp_insert_post( $post_data );
    WP_CLI::log( "ìƒˆ í¬ìŠ¤íŠ¸ #{$post_id} ìƒì„±" );
}

// â”€â”€ ë©”íƒ€ í•„ë“œ â”€â”€
$meta = [
    '_ft_destination_name' => 'ì˜¤ì‚¬ì¹´',
    '_ft_duration'         => '3ë°•4ì¼',
    '_ft_price_range'      => 'moderate',
    '_ft_difficulty'       => 'easy',
    '_ft_best_season'      => '3ì›”~5ì›” (ë²šê½ƒ ì‹œì¦Œ)',
    '_ft_highlights'       => 'ê°€ì´ìœ ì¹¸ ìˆ˜ì¡±ê´€, ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬, ë„í†¤ë³´ë¦¬, ì˜¤ì‚¬ì¹´ì„±, êµ¬ë¡œëª¬ ì‹œì¥, ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œ',
    '_ft_map_lat'          => '34.6737',
    '_ft_map_lng'          => '135.4998',
    '_ft_map_zoom'         => 12,
    '_ft_gallery'          => [],
];

foreach ( $meta as $key => $value ) {
    update_post_meta( $post_id, $key, $value );
}

// â”€â”€ ì¼ìë³„ ì¼ì • (Day 1~4) â€” ìƒˆ spots êµ¬ì¡° + Klook ë§í¬ â”€â”€
$days = [
    // â”€â”€ Day 1: ë„ì°© ë° ë‚œë°” ì§€ì—­ íƒë°© (5ê°œ spot) â”€â”€
    [
        'title' => 'Day 1: ë„ì°© ë° ë‚œë°” ì§€ì—­ íƒë°©',
        'spots' => [
            [
                'name'        => 'ê°„ì‚¬ì´ê³µí•­ ë„ì°©',
                'description' => "ê°„ì‚¬ì´ êµ­ì œê³µí•­ì— ë„ì°©í•©ë‹ˆë‹¤. ì…êµ­ ì‹¬ì‚¬ í›„ ë‚œì¹´ì´ ë¼í”¼íŠ¸ íŠ¹ê¸‰(920ì—”, ì•½ 34ë¶„)ìœ¼ë¡œ ë‚œë°”ì—­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. {$k_rapit}",
                'tip'         => "ICOCA êµí†µì¹´ë“œë¥¼ ê³µí•­ì—ì„œ ë¯¸ë¦¬ êµ¬ì…í•˜ì„¸ìš”. ê°„ì‚¬ì´ ì „ì—­ êµí†µ+í¸ì˜ì  ê²°ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. {$k_icoca}",
                'lat'         => '34.4347',
                'lng'         => '135.2441',
            ],
            [
                'name'        => 'í˜¸í…” ë‹ˆì½” ì˜¤ì‚¬ì¹´ ì²´í¬ì¸',
                'description' => 'ë‚œë°”ì—­ ë„ë³´ 1ë¶„ ê±°ë¦¬ì˜ í˜¸í…” ë‹ˆì½” ì˜¤ì‚¬ì¹´ì— ì²´í¬ì¸í•©ë‹ˆë‹¤. ì‹ ì‚¬ì´ë°”ì‹œÂ·ë„í†¤ë³´ë¦¬ ë„ë³´ê¶Œìœ¼ë¡œ ê°€ì¡±ì—¬í–‰ ê±°ì ìœ¼ë¡œ ìµœì ì…ë‹ˆë‹¤.',
                'tip'         => '',
                'lat'         => '34.6679',
                'lng'         => '135.5013',
            ],
            [
                'name'        => 'ë„í†¤ë³´ë¦¬',
                'description' => 'ê¸€ë¦¬ì½” ê°„íŒê³¼ ê±°ëŒ€í•œ ê²Œ ê°„íŒì´ ìˆëŠ” í™”ë ¤í•œ ë„¤ì˜¨ì‚¬ì¸ ê±°ë¦¬ë¥¼ ê±¸ìœ¼ë©° íƒ€ì½”ì•¼í‚¤, ì´ì¹´ì•¼í‚¤ ë“± ê¸¸ê±°ë¦¬ ìŒì‹ì„ ë§›ë´…ë‹ˆë‹¤. ë„í†¤ë³´ë¦¬ ê°•ë³€ ì‚°ì±…ë„ ì¶”ì²œí•©ë‹ˆë‹¤.',
                'tip'         => 'ê¸€ë¦¬ì½” ê°„íŒ í¬í† ì¡´ì€ ì—ë¹„ìŠ¤ë°”ì‹œ ë‹¤ë¦¬ ìœ„ê°€ ë² ìŠ¤íŠ¸ ìŠ¤íŒŸì…ë‹ˆë‹¤.',
                'lat'         => '34.6687',
                'lng'         => '135.5013',
            ],
            [
                'name'        => 'ì‹ ì‚¬ì´ë°”ì‹œìŠ¤ì§€ ì‡¼í•‘',
                'description' => '600m ê¸¸ì´ì˜ ì•„ì¼€ì´ë“œí˜• ì‡¼í•‘ê°€ì—ì„œ í¬ì¼“ëª¬ì„¼í„°, ë””ì¦ˆë‹ˆìŠ¤í† ì–´, ë“œëŸ­ìŠ¤í† ì–´ë¥¼ êµ¬ê²½í•©ë‹ˆë‹¤. ë¹„ ì˜¤ëŠ” ë‚ ë„ ê±±ì • ì—†ëŠ” ì‹¤ë‚´ ì‡¼í•‘ê°€ì…ë‹ˆë‹¤.',
                'tip'         => '',
                'lat'         => '34.6723',
                'lng'         => '135.5015',
            ],
            [
                'name'        => 'ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ ë¯¸ì¦ˆë…¸',
                'description' => '1945ë…„ ì°½ì—…í•œ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ ëª…ê°€ì—ì„œ ë°”ì‚­í•œ ê²‰ë©´ê³¼ ë¶€ë“œëŸ¬ìš´ ì†ì´ ì¼í’ˆì¸ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ë¥¼ ì¦ê¹ë‹ˆë‹¤. ì˜¤ì‚¬ì¹´ ì†Œìš¸í‘¸ë“œì˜ ì •ìˆ˜ë¥¼ ë§›ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                'tip'         => 'ëŒ€ê¸°ê°€ ê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ ì˜¤í›„ 5ì‹œ ì „ì— ë°©ë¬¸ì„ ì¶”ì²œí•©ë‹ˆë‹¤.',
                'lat'         => '34.6688',
                'lng'         => '135.5017',
            ],
        ],
    ],
    // â”€â”€ Day 2: í•´ì–‘ìƒë¬¼ ì²´í—˜ ë° í•­êµ¬ ê´€ê´‘ (4ê°œ spot) â”€â”€
    [
        'title' => 'Day 2: í•´ì–‘ìƒë¬¼ ì²´í—˜ ë° í•­êµ¬ ê´€ê´‘',
        'spots' => [
            [
                'name'        => 'ê°€ì´ìœ ì¹¸ ìˆ˜ì¡±ê´€',
                'description' => "ê³ ë˜ìƒì–´ê°€ ìœ ì˜í•˜ëŠ” ëŒ€í˜• ì¤‘ì•™ ìˆ˜ì¡°ë¥¼ ê°ìƒí•˜ê³ , 14ê°œ ëŒ€ìˆ˜ì¡°ì—ì„œ 580ì¢… 3ë§Œ ì ì˜ í•´ì–‘ìƒë¬¼ì„ ê´€ì°°í•©ë‹ˆë‹¤. í­ê·„, ë°”ë‹¤í‘œë²”, ê°€ì˜¤ë¦¬ í„°ì¹˜ ì²´í—˜ì€ ì•„ì´ë“¤ì—ê²Œ ìŠì§€ ëª»í•  ì¶”ì–µì´ ë©ë‹ˆë‹¤. {$k_kaiyukan}",
                'tip'         => "ì–´ë¥¸ 2,700ì—”, ì•„ì´ 1,400ì—”. ë¼í”¼íŠ¸ ì™•ë³µê¶Œê³¼ ì„¸íŠ¸ êµ¬ë§¤ ì‹œ í• ì¸! {$k_combo}",
                'lat'         => '34.6545',
                'lng'         => '135.4290',
            ],
            [
                'name'        => 'í…œí¬ì” ë§ˆì¼“í”Œë ˆì´ìŠ¤',
                'description' => 'ê°€ì´ìœ ì¹¸ ë°”ë¡œ ì˜†ì˜ ì‡¼í•‘ëª°ì—ì„œ íƒ€ì½”ì•¼í‚¤ì™€ ì˜¤ì½”ë…¸ë¯¸ì•¼í‚¤ë¡œ ì ì‹¬ì„ í•´ê²°í•©ë‹ˆë‹¤. ë‚˜ë‹ˆì™€ ì¿ ì´ì‹ ë³´ ìš”ì½”ì´ˆ(ë¨¹ê±°ë¦¬ í…Œë§ˆíŒŒí¬)ì—ì„œ ì˜¤ì‚¬ì¹´ ë¨¹ê±°ë¦¬ë¥¼ í•œê³³ì—ì„œ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                'tip'         => '',
                'lat'         => '34.6548',
                'lng'         => '135.4300',
            ],
            [
                'name'        => 'í…œí¬ì” ëŒ€ê´€ëŒì°¨',
                'description' => "ë†’ì´ 112.5m ëŒ€ê´€ëŒì°¨ì—ì„œ ì˜¤ì‚¬ì¹´ë§Œ ì „ê²½ì„ ê°ìƒí•©ë‹ˆë‹¤. íˆ¬ëª… ê³¤ëŒë¼ ì˜µì…˜ë„ ìˆì–´ ìŠ¤ë¦´ ë§Œì ! {$k_ferris}",
                'tip'         => "ì˜¤ì‚¬ì¹´ ì£¼ìœ íŒ¨ìŠ¤ê°€ ìˆìœ¼ë©´ ë¬´ë£Œ íƒ‘ìŠ¹! {$k_pass}",
                'lat'         => '34.6553',
                'lng'         => '135.4286',
            ],
            [
                'name'        => 'ì‚°íƒ€ë§ˆë¦¬ì•„ ìœ ëŒì„ ',
                'description' => "ì½œëŸ¼ë²„ìŠ¤ì˜ ì‚°íƒ€ë§ˆë¦¬ì•„ í˜¸ë¥¼ ëª¨ë¸ë¡œ í•œ ìœ ëŒì„ ìœ¼ë¡œ 45ë¶„ê°„ ì˜¤ì‚¬ì¹´í•­ì„ ë‘˜ëŸ¬ë´…ë‹ˆë‹¤. í•­êµ¬ì˜ ì„ì–‘ì´ ì•„ë¦„ë‹µìŠµë‹ˆë‹¤. {$k_santa}",
                'tip'         => "ì£¼ìœ íŒ¨ìŠ¤ ì†Œì§€ì ë¬´ë£Œ. ë°ì´í¬ë£¨ì¦ˆ(ë‚®)ì™€ íŠ¸ì™€ì¼ë¼ì‡ í¬ë£¨ì¦ˆ(ì €ë…) ì¤‘ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤. {$k_pass}",
                'lat'         => '34.6543',
                'lng'         => '135.4318',
            ],
        ],
    ],
    // â”€â”€ Day 3: êµ¬ë¡œëª¬ ì‹œì¥ & ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬ (5ê°œ spot) â”€â”€
    [
        'title' => 'Day 3: êµ¬ë¡œëª¬ ì‹œì¥ & ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬',
        'spots' => [
            [
                'name'        => 'êµ¬ë¡œëª¬ ì‹œì¥',
                'description' => 'ì˜¤ì‚¬ì¹´ì˜ ë¶€ì—Œìœ¼ë¡œ ë¶ˆë¦¬ëŠ” 180ë…„ ì „í†µì˜ ì‹œì¥ì…ë‹ˆë‹¤. ì°¸ì¹˜ ì‚¬ì‹œë¯¸, ê³ ë² ê·œ ê¼¬ì¹˜, ë”¸ê¸° ëŒ€ë³µ, ì‹ ì„ í•œ í•´ì‚°ë¬¼ ë“±ì„ ë¨¹ìœ¼ë©° í™œë ¥ì„ ì±„ì›ë‹ˆë‹¤.',
                'tip'         => 'ì˜¤ì „ 9~10ì‹œê°€ ê°€ì¥ í™œê¸°ì°¨ê³  ì‹ ì„ í•œ ì‹œê°„ëŒ€ì…ë‹ˆë‹¤. í˜„ê¸ˆ ì¤€ë¹„ ê¶Œì¥.',
                'lat'         => '34.6627',
                'lng'         => '135.5067',
            ],
            [
                'name'        => 'ìœ ë‹ˆë²„ì„¤ ìŠ¤íŠœë””ì˜¤ ì¬íŒ¬(USJ)',
                'description' => "ì„¸ê³„ì ì¸ í…Œë§ˆíŒŒí¬ USJì— ì…ì¥í•©ë‹ˆë‹¤. ë¯¸ë‹ˆì–¸ íŒŒí¬, ì¥¬ë¼ê¸° ì›”ë“œ ë“± ë‹¤ì–‘í•œ ì–´íŠ¸ë™ì…˜ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. {$k_usj}",
                'tip'         => "ê°œì¥ 30ë¶„ ì „ì— ë„ì°©í•´ ì…ì¥ ëŒ€ê¸°í•˜ì„¸ìš”. ìµìŠ¤í”„ë ˆìŠ¤ íŒ¨ìŠ¤ë¡œ ëŒ€ê¸°ì‹œê°„ì„ ëŒ€í­ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. {$k_express}",
                'lat'         => '34.6654',
                'lng'         => '135.4323',
            ],
            [
                'name'        => 'ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œ',
                'description' => 'íŒŒì›Œì—… ë°´ë“œë¡œ ì½”ì¸ì„ ìˆ˜ì§‘í•˜ê³  AR ê¸°ìˆ ì˜ ë§ˆë¦¬ì˜¤ ì¹´íŠ¸: ì¿ íŒŒì˜ ë„ì „ ë¼ì´ë“œë¥¼ ì²´í—˜í•©ë‹ˆë‹¤. ì¿ íŒŒ ì„±ê³¼ í”¼ì¹˜ ì„± í¬í† ì¡´ì—ì„œ ì¸ìƒìƒ·ì„ ë‚¨ê¸°ì„¸ìš”.',
                'tip'         => 'ì…ì¥ ì •ë¦¬ê¶Œì´ í•„ìš”í•  ìˆ˜ ìˆìœ¼ë‹ˆ USJ ì•±ì„ ë¯¸ë¦¬ ì„¤ì¹˜í•˜ì„¸ìš”.',
                'lat'         => '34.6660',
                'lng'         => '135.4312',
            ],
            [
                'name'        => 'í•´ë¦¬í¬í„° ìœ„ì €ë”© ì›”ë“œ',
                'description' => 'í˜¸ê·¸ì™€íŠ¸ ì„±ê³¼ í˜¸ê·¸ìŠ¤ë¯¸ë“œ ë§ˆì„ì„ íƒí—˜í•©ë‹ˆë‹¤. ê¸ˆì§€ëœ ì—¬í–‰ ë¼ì´ë“œë¥¼ íƒ€ê³  ë²„í„°ë¹„ì–´ë¡œ ëª©ì„ ì¶•ì…ë‹ˆë‹¤.',
                'tip'         => '',
                'lat'         => '34.6668',
                'lng'         => '135.4340',
            ],
            [
                'name'        => 'í‚¤ë…¸í”¼ì˜¤ ì¹´í˜ / ì‚¼ì†íƒ• ìˆ ì§‘',
                'description' => 'ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œì˜ í‚¤ë…¸í”¼ì˜¤ ì¹´í˜ì—ì„œ ë§ˆë¦¬ì˜¤ í…Œë§ˆ ìŒì‹ì„, ë˜ëŠ” í•´ë¦¬í¬í„° êµ¬ì—­ì˜ ì‚¼ì†íƒ• ìˆ ì§‘ì—ì„œ ì˜êµ­ì‹ ì‹ì‚¬ë¥¼ ì¦ê¹ë‹ˆë‹¤.',
                'tip'         => 'í‚¤ë…¸í”¼ì˜¤ ì¹´í˜ëŠ” ìŠˆí¼ ë‹Œí…ë„ ì›”ë“œ ì•ˆì— ìˆì–´ ì…ì¥ ì •ë¦¬ê¶Œ í•„ìš”.',
                'lat'         => '34.6658',
                'lng'         => '135.4316',
            ],
        ],
    ],
    // â”€â”€ Day 4: ì˜¤ì‚¬ì¹´ì„±, ì‡¼í•‘ & ê·€êµ­ (4ê°œ spot) â”€â”€
    [
        'title' => 'Day 4: ì˜¤ì‚¬ì¹´ì„±, ì‡¼í•‘ & ê·€êµ­',
        'spots' => [
            [
                'name'        => 'ì˜¤ì‚¬ì¹´ì„±',
                'description' => "ë„ìš”í† ë¯¸ íˆë°ìš”ì‹œê°€ ì„¸ìš´ ì˜¤ì‚¬ì¹´ì„±ì„ ë°©ë¬¸í•©ë‹ˆë‹¤. 8ì¸µ ì²œìˆ˜ê°ì—ì„œ ì˜¤ì‚¬ì¹´ ì‹œë‚´ ì „ê²½ì„ ê°ìƒí•˜ê³ (ì—˜ë¦¬ë² ì´í„° ì´ìš© ê°€ëŠ¥), 3ì›”ì—ëŠ” ì„± ì£¼ë³€ ë²šê½ƒê¸¸ì´ ì¥ê´€ì…ë‹ˆë‹¤. {$k_castle}",
                'tip'         => "ì˜¤ì‚¬ì¹´ ì£¼ìœ íŒ¨ìŠ¤ê°€ ìˆìœ¼ë©´ ì²œìˆ˜ê° ë¬´ë£Œ ì…ì¥! {$k_pass}",
                'lat'         => '34.6873',
                'lng'         => '135.5262',
            ],
            [
                'name'        => '551 í˜¸ë¼ì´ ë‚œë°” ë³¸ì ',
                'description' => '1945ë…„ë¶€í„° ì´ì–´ì˜¨ ì „í†µì˜ ë¶€íƒ€ë§Œ(ë¼ì§€ê³ ê¸° ë§Œë‘, 1ê°œ 200ì—”)ì„ ë§›ë´…ë‹ˆë‹¤. í¬ì¥ë„ ê°€ëŠ¥í•˜ë‹ˆ ë¹„í–‰ê¸° ê°„ì‹ìœ¼ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤.',
                'tip'         => '2ì¸µ ë ˆìŠ¤í† ë‘ì—ì„œ ì‹ì‚¬ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¶€íƒ€ë§Œì€ í…Œì´í¬ì•„ì›ƒì´ ë” ë¹ ë¦…ë‹ˆë‹¤.',
                'lat'         => '34.6653',
                'lng'         => '135.5014',
            ],
            [
                'name'        => 'ë‚œë°” ì‡¼í•‘ (íƒ€ì¹´ì‹œë§ˆì•¼Â·ë‚œë°”íŒŒí¬ìŠ¤Â·ëˆí‚¤í˜¸í…Œ)',
                'description' => 'íƒ€ì¹´ì‹œë§ˆì•¼ ë°±í™”ì , ë‚œë°” íŒŒí¬ìŠ¤, ëˆí‚¤í˜¸í…Œì—ì„œ ì¼ë³¸ ê³¼ì, í™”ì¥í’ˆ, ì¥ë‚œê° ë“± ë§ˆì§€ë§‰ ì‡¼í•‘ì„ ì¦ê¹ë‹ˆë‹¤.',
                'tip'         => 'ì„ ë¬¼ êµ¬ì…ì€ ê³µí•­ë³´ë‹¤ ì‹œë‚´ì—ì„œ ë¯¸ë¦¬ í•˜ëŠ” ê²ƒì´ ì €ë ´í•©ë‹ˆë‹¤.',
                'lat'         => '34.6654',
                'lng'         => '135.5007',
            ],
            [
                'name'        => 'ê°„ì‚¬ì´ê³µí•­ ì¶œë°œ',
                'description' => 'ë‚œì¹´ì´ ê³µí•­ê¸‰í–‰ìœ¼ë¡œ ê°„ì‚¬ì´ê³µí•­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. ì¦ê±°ì› ë˜ ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ì„ ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤.',
                'tip'         => 'êµ­ì œì„ ì€ 2ì‹œê°„ ì „ ì²´í¬ì¸ì„ ê¶Œì¥í•©ë‹ˆë‹¤.',
                'lat'         => '34.4347',
                'lng'         => '135.2441',
            ],
        ],
    ],
];

update_post_meta( $post_id, '_ft_days', $days );

// â”€â”€ íƒì†Œë…¸ë¯¸ ì—°ê²° â”€â”€
$dest_ids = [];
$osaka_term = get_term_by( 'slug', 'osaka', 'destination' );
if ( $osaka_term ) $dest_ids[] = $osaka_term->term_id;
$japan_term = get_term_by( 'slug', 'japan', 'destination' );
if ( $japan_term ) $dest_ids[] = $japan_term->term_id;
if ( ! empty( $dest_ids ) ) {
    wp_set_object_terms( $post_id, $dest_ids, 'destination' );
}

$style_ids = [];
$family_term = get_term_by( 'slug', 'family', 'travel_style' );
if ( $family_term ) $style_ids[] = $family_term->term_id;
$food_term = get_term_by( 'slug', 'food-tour', 'travel_style' );
if ( $food_term ) $style_ids[] = $food_term->term_id;
if ( ! empty( $style_ids ) ) {
    wp_set_object_terms( $post_id, $style_ids, 'travel_style' );
}

// spot ê°œìˆ˜ í•©ì‚°
$total_spots = 0;
foreach ( $days as $d ) {
    $total_spots += count( $d['spots'] );
}

WP_CLI::success( "ì˜¤ì‚¬ì¹´ ê°€ì¡±ì—¬í–‰ 3ë°•4ì¼ í¬ìŠ¤íŠ¸ #{$post_id} ì—…ë°ì´íŠ¸ ì™„ë£Œ! (spots êµ¬ì¡°: {$total_spots}ê°œ ì¥ì†Œ)" );
WP_CLI::log( '' );
WP_CLI::log( 'êµ¬ì¡°: Day 1 (5 spots) + Day 2 (4 spots) + Day 3 (5 spots) + Day 4 (4 spots) = 18 spots' );
WP_CLI::log( 'Klook ë§í¬ ì‚½ì… ìœ„ì¹˜:' );
WP_CLI::log( '  Day 1: ê°„ì‚¬ì´ê³µí•­(ë¼í”¼íŠ¸, ICOCA)' );
WP_CLI::log( '  Day 2: ê°€ì´ìœ ì¹¸(ì…ì¥ê¶Œ, ì½¤ë³´), ëŒ€ê´€ëŒì°¨(ì£¼ìœ íŒ¨ìŠ¤), ìœ ëŒì„ (ì£¼ìœ íŒ¨ìŠ¤)' );
WP_CLI::log( '  Day 3: USJ(ì…ì¥ê¶Œ, ìµìŠ¤í”„ë ˆìŠ¤ íŒ¨ìŠ¤)' );
WP_CLI::log( '  Day 4: ì˜¤ì‚¬ì¹´ì„±(ì…ì¥ê¶Œ, ì£¼ìœ íŒ¨ìŠ¤)' );
